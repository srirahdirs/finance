{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\loan-management-system\\\\frontend\\\\src\\\\components\\\\PreCloseLoan.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PreCloseLoan = ({\n  loan,\n  onClose,\n  onSuccess\n}) => {\n  _s();\n  var _loan$client2;\n  const [formData, setFormData] = useState({\n    principalAmount: (loan === null || loan === void 0 ? void 0 : loan.loanAmount) || 0,\n    interestPaid: (loan === null || loan === void 0 ? void 0 : loan.totalCollected) || 0,\n    remainingPrincipal: (loan === null || loan === void 0 ? void 0 : loan.remainingAmount) || 0,\n    penaltyAmount: 0,\n    discountAmount: 0,\n    finalAmount: 0,\n    paymentMethod: 'cash',\n    notes: ''\n  });\n  const [calculations, setCalculations] = useState({\n    totalOutstanding: 0,\n    penaltyApplied: 0,\n    discountApplied: 0,\n    finalSettlement: 0,\n    savings: 0\n  });\n  useEffect(() => {\n    calculateFinalAmount();\n  }, [formData.penaltyAmount, formData.discountAmount, loan]);\n  const calculateFinalAmount = () => {\n    const remainingPrincipal = parseFloat(loan.remainingAmount) || 0;\n    const penaltyAmount = parseFloat(formData.penaltyAmount) || 0;\n    const discountAmount = parseFloat(formData.discountAmount) || 0;\n    const totalOutstanding = remainingPrincipal + penaltyAmount;\n    const afterDiscount = totalOutstanding - discountAmount;\n    const finalSettlement = Math.max(0, afterDiscount);\n    const savings = discountAmount;\n    setCalculations({\n      totalOutstanding,\n      penaltyApplied: penaltyAmount,\n      discountApplied: discountAmount,\n      finalSettlement,\n      savings\n    });\n    setFormData(prev => ({\n      ...prev,\n      finalAmount: finalSettlement\n    }));\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const showConfirmationPopup = () => {\n    var _loan$client;\n    const popup = document.createElement('div');\n    popup.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50';\n    popup.innerHTML = `\n            <div class=\"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full\">\n                <div class=\"text-center\">\n                    <div class=\"text-6xl mb-4\">üîí</div>\n                    <h3 class=\"text-xl font-bold text-gray-900 mb-2\">Pre-Close Loan Confirmation</h3>\n                    <p class=\"text-gray-600 mb-4\">Please review the details before confirming:</p>\n                    \n                    <div class=\"bg-gray-50 p-4 rounded-lg mb-4 text-left\">\n                        <div class=\"space-y-2 text-sm\">\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-500\">Client:</span>\n                                <span class=\"font-medium\">${(_loan$client = loan.client) === null || _loan$client === void 0 ? void 0 : _loan$client.name}</span>\n                            </div>\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-500\">Original Loan:</span>\n                                <span class=\"font-medium\">‚Çπ${loan.loanAmount.toLocaleString()}</span>\n                            </div>\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-500\">Interest Collected:</span>\n                                <span class=\"font-medium text-green-600\">‚Çπ${loan.totalCollected.toLocaleString()}</span>\n                            </div>\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-500\">Remaining Principal:</span>\n                                <span class=\"font-medium\">‚Çπ${loan.remainingAmount.toLocaleString()}</span>\n                            </div>\n                            ${formData.penaltyAmount > 0 ? `\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-500\">Penalty Applied:</span>\n                                <span class=\"font-medium text-red-600\">‚Çπ${formData.penaltyAmount.toLocaleString()}</span>\n                            </div>\n                            ` : ''}\n                            ${formData.discountAmount > 0 ? `\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-500\">Discount Applied:</span>\n                                <span class=\"font-medium text-green-600\">‚Çπ${formData.discountAmount.toLocaleString()}</span>\n                            </div>\n                            ` : ''}\n                            <hr class=\"border-gray-200 my-2\">\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-900 font-semibold\">Final Settlement:</span>\n                                <span class=\"font-bold text-blue-600 text-lg\">‚Çπ${calculations.finalSettlement.toLocaleString()}</span>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <div class=\"flex space-x-3\">\n                        <button onclick=\"this.parentElement.parentElement.parentElement.parentElement.remove()\" \n                                class=\"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\">\n                            Cancel\n                        </button>\n                        <button onclick=\"window.confirmPreCloseLoan()\" \n                                class=\"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\">\n                            Confirm Pre-Close\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `;\n\n    // Store the popup reference for cleanup\n    window.currentPreClosePopup = popup;\n    document.body.appendChild(popup);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    showConfirmationPopup();\n  };\n  const confirmPreCloseLoan = async () => {\n    try {\n      // Remove the popup\n      if (window.currentPreClosePopup) {\n        window.currentPreClosePopup.remove();\n        window.currentPreClosePopup = null;\n      }\n      const response = await fetch(`http://localhost:5000/api/loans/${loan._id}/pre-close`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          paymentMethod: formData.paymentMethod,\n          finalAmount: calculations.finalSettlement,\n          penaltyAmount: formData.penaltyAmount,\n          discountAmount: formData.discountAmount,\n          notes: formData.notes\n        })\n      });\n      if (response.ok) {\n        showSuccessPopup();\n        onSuccess();\n        onClose();\n      }\n    } catch (error) {\n      console.error('Error pre-closing loan:', error);\n      showErrorPopup('Error pre-closing loan. Please try again.');\n    }\n  };\n\n  // Make the function globally available\n  window.confirmPreCloseLoan = confirmPreCloseLoan;\n  if (!loan) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-bold text-gray-900\",\n              children: \"Pre-Close Loan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500 mt-1\",\n              children: [\"Client: \", (_loan$client2 = loan.client) === null || _loan$client2 === void 0 ? void 0 : _loan$client2.name, \" | Loan Amount: \\u20B9\", loan.loanAmount.toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            className: \"text-gray-400 hover:text-gray-600 text-2xl\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-4 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold text-gray-900 mb-3\",\n              children: \"Loan Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-500\",\n                  children: \"Principal Amount:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold\",\n                  children: [\"\\u20B9\", loan.loanAmount.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-500\",\n                  children: \"Interest Collected:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold text-green-600\",\n                  children: [\"\\u20B9\", loan.totalCollected.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-500\",\n                  children: \"Remaining Principal:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold\",\n                  children: [\"\\u20B9\", loan.remainingAmount.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-500\",\n                  children: \"Monthly Interest:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-semibold\",\n                  children: [\"\\u20B9\", loan.monthlyInterest.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Penalty Amount (\\u20B9)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                name: \"penaltyAmount\",\n                value: formData.penaltyAmount,\n                onChange: handleInputChange,\n                className: \"form-input\",\n                placeholder: \"0\",\n                min: \"0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-500 mt-1\",\n                children: \"Early closure penalty (if applicable)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Discount Amount (\\u20B9)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                name: \"discountAmount\",\n                value: formData.discountAmount,\n                onChange: handleInputChange,\n                className: \"form-input\",\n                placeholder: \"0\",\n                min: \"0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-500 mt-1\",\n                children: \"Discount for early payment\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Payment Method\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"paymentMethod\",\n              value: formData.paymentMethod,\n              onChange: handleInputChange,\n              className: \"form-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"cash\",\n                children: \"\\uD83D\\uDCB5 Cash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"bank_transfer\",\n                children: \"\\uD83C\\uDFE6 Bank Transfer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"cheque\",\n                children: \"\\uD83D\\uDCC4 Cheque\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Notes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"notes\",\n              value: formData.notes,\n              onChange: handleInputChange,\n              className: \"form-textarea\",\n              rows: \"3\",\n              placeholder: \"Additional notes about this pre-closure...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-blue-50 p-4 rounded-lg border border-blue-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold text-blue-900 mb-3\",\n              children: \"Settlement Calculation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Remaining Principal:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium\",\n                  children: [\"\\u20B9\", loan.remainingAmount.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Penalty Amount:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-red-600\",\n                  children: [\"+\\u20B9\", calculations.penaltyApplied.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Discount Amount:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-green-600\",\n                  children: [\"-\\u20B9\", calculations.discountApplied.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                className: \"border-blue-200\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-lg font-bold\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Final Settlement Amount:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-blue-900\",\n                  children: [\"\\u20B9\", calculations.finalSettlement.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 33\n              }, this), calculations.discountApplied > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between text-sm text-green-600\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Client Savings:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u20B9\", calculations.savings.toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-end space-x-3 pt-4 border-t border-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-outline\",\n              onClick: onClose,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-danger\",\n              children: [\"\\uD83D\\uDD12 Pre-Close Loan (\\u20B9\", calculations.finalSettlement.toLocaleString(), \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 9\n  }, this);\n};\n_s(PreCloseLoan, \"j4WUGa4yrXYA01D4HmgCI8IG298=\");\n_c = PreCloseLoan;\nexport default PreCloseLoan;\nvar _c;\n$RefreshReg$(_c, \"PreCloseLoan\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","PreCloseLoan","loan","onClose","onSuccess","_s","_loan$client2","formData","setFormData","principalAmount","loanAmount","interestPaid","totalCollected","remainingPrincipal","remainingAmount","penaltyAmount","discountAmount","finalAmount","paymentMethod","notes","calculations","setCalculations","totalOutstanding","penaltyApplied","discountApplied","finalSettlement","savings","calculateFinalAmount","parseFloat","afterDiscount","Math","max","prev","handleInputChange","e","name","value","target","showConfirmationPopup","_loan$client","popup","document","createElement","className","innerHTML","client","toLocaleString","window","currentPreClosePopup","body","appendChild","handleSubmit","preventDefault","confirmPreCloseLoan","remove","response","fetch","_id","method","headers","JSON","stringify","ok","showSuccessPopup","error","console","showErrorPopup","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","monthlyInterest","type","onChange","placeholder","min","rows","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/loan-management-system/frontend/src/components/PreCloseLoan.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nconst PreCloseLoan = ({ loan, onClose, onSuccess }) => {\r\n    const [formData, setFormData] = useState({\r\n        principalAmount: loan?.loanAmount || 0,\r\n        interestPaid: loan?.totalCollected || 0,\r\n        remainingPrincipal: loan?.remainingAmount || 0,\r\n        penaltyAmount: 0,\r\n        discountAmount: 0,\r\n        finalAmount: 0,\r\n        paymentMethod: 'cash',\r\n        notes: ''\r\n    });\r\n\r\n    const [calculations, setCalculations] = useState({\r\n        totalOutstanding: 0,\r\n        penaltyApplied: 0,\r\n        discountApplied: 0,\r\n        finalSettlement: 0,\r\n        savings: 0\r\n    });\r\n\r\n    useEffect(() => {\r\n        calculateFinalAmount();\r\n    }, [formData.penaltyAmount, formData.discountAmount, loan]);\r\n\r\n    const calculateFinalAmount = () => {\r\n        const remainingPrincipal = parseFloat(loan.remainingAmount) || 0;\r\n        const penaltyAmount = parseFloat(formData.penaltyAmount) || 0;\r\n        const discountAmount = parseFloat(formData.discountAmount) || 0;\r\n\r\n        const totalOutstanding = remainingPrincipal + penaltyAmount;\r\n        const afterDiscount = totalOutstanding - discountAmount;\r\n        const finalSettlement = Math.max(0, afterDiscount);\r\n        const savings = discountAmount;\r\n\r\n        setCalculations({\r\n            totalOutstanding,\r\n            penaltyApplied: penaltyAmount,\r\n            discountApplied: discountAmount,\r\n            finalSettlement,\r\n            savings\r\n        });\r\n\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            finalAmount: finalSettlement\r\n        }));\r\n    };\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const showConfirmationPopup = () => {\r\n        const popup = document.createElement('div');\r\n        popup.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50';\r\n        popup.innerHTML = `\r\n            <div class=\"bg-white rounded-xl shadow-2xl p-6 max-w-md w-full\">\r\n                <div class=\"text-center\">\r\n                    <div class=\"text-6xl mb-4\">üîí</div>\r\n                    <h3 class=\"text-xl font-bold text-gray-900 mb-2\">Pre-Close Loan Confirmation</h3>\r\n                    <p class=\"text-gray-600 mb-4\">Please review the details before confirming:</p>\r\n                    \r\n                    <div class=\"bg-gray-50 p-4 rounded-lg mb-4 text-left\">\r\n                        <div class=\"space-y-2 text-sm\">\r\n                            <div class=\"flex justify-between\">\r\n                                <span class=\"text-gray-500\">Client:</span>\r\n                                <span class=\"font-medium\">${loan.client?.name}</span>\r\n                            </div>\r\n                            <div class=\"flex justify-between\">\r\n                                <span class=\"text-gray-500\">Original Loan:</span>\r\n                                <span class=\"font-medium\">‚Çπ${loan.loanAmount.toLocaleString()}</span>\r\n                            </div>\r\n                            <div class=\"flex justify-between\">\r\n                                <span class=\"text-gray-500\">Interest Collected:</span>\r\n                                <span class=\"font-medium text-green-600\">‚Çπ${loan.totalCollected.toLocaleString()}</span>\r\n                            </div>\r\n                            <div class=\"flex justify-between\">\r\n                                <span class=\"text-gray-500\">Remaining Principal:</span>\r\n                                <span class=\"font-medium\">‚Çπ${loan.remainingAmount.toLocaleString()}</span>\r\n                            </div>\r\n                            ${formData.penaltyAmount > 0 ? `\r\n                            <div class=\"flex justify-between\">\r\n                                <span class=\"text-gray-500\">Penalty Applied:</span>\r\n                                <span class=\"font-medium text-red-600\">‚Çπ${formData.penaltyAmount.toLocaleString()}</span>\r\n                            </div>\r\n                            ` : ''}\r\n                            ${formData.discountAmount > 0 ? `\r\n                            <div class=\"flex justify-between\">\r\n                                <span class=\"text-gray-500\">Discount Applied:</span>\r\n                                <span class=\"font-medium text-green-600\">‚Çπ${formData.discountAmount.toLocaleString()}</span>\r\n                            </div>\r\n                            ` : ''}\r\n                            <hr class=\"border-gray-200 my-2\">\r\n                            <div class=\"flex justify-between\">\r\n                                <span class=\"text-gray-900 font-semibold\">Final Settlement:</span>\r\n                                <span class=\"font-bold text-blue-600 text-lg\">‚Çπ${calculations.finalSettlement.toLocaleString()}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div class=\"flex space-x-3\">\r\n                        <button onclick=\"this.parentElement.parentElement.parentElement.parentElement.remove()\" \r\n                                class=\"flex-1 px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\">\r\n                            Cancel\r\n                        </button>\r\n                        <button onclick=\"window.confirmPreCloseLoan()\" \r\n                                class=\"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\">\r\n                            Confirm Pre-Close\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n        \r\n        // Store the popup reference for cleanup\r\n        window.currentPreClosePopup = popup;\r\n        document.body.appendChild(popup);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        showConfirmationPopup();\r\n    };\r\n\r\n    const confirmPreCloseLoan = async () => {\r\n        try {\r\n            // Remove the popup\r\n            if (window.currentPreClosePopup) {\r\n                window.currentPreClosePopup.remove();\r\n                window.currentPreClosePopup = null;\r\n            }\r\n\r\n            const response = await fetch(`http://localhost:5000/api/loans/${loan._id}/pre-close`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    paymentMethod: formData.paymentMethod,\r\n                    finalAmount: calculations.finalSettlement,\r\n                    penaltyAmount: formData.penaltyAmount,\r\n                    discountAmount: formData.discountAmount,\r\n                    notes: formData.notes\r\n                }),\r\n            });\r\n\r\n            if (response.ok) {\r\n                showSuccessPopup();\r\n                onSuccess();\r\n                onClose();\r\n            }\r\n        } catch (error) {\r\n            console.error('Error pre-closing loan:', error);\r\n            showErrorPopup('Error pre-closing loan. Please try again.');\r\n        }\r\n    };\r\n\r\n    // Make the function globally available\r\n    window.confirmPreCloseLoan = confirmPreCloseLoan;\r\n\r\n    if (!loan) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n            <div className=\"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\r\n                <div className=\"card-header\">\r\n                    <div className=\"flex justify-between items-center\">\r\n                        <div>\r\n                            <h2 className=\"text-xl font-bold text-gray-900\">Pre-Close Loan</h2>\r\n                            <p className=\"text-sm text-gray-500 mt-1\">\r\n                                Client: {loan.client?.name} | Loan Amount: ‚Çπ{loan.loanAmount.toLocaleString()}\r\n                            </p>\r\n                        </div>\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"text-gray-400 hover:text-gray-600 text-2xl\"\r\n                        >\r\n                            √ó\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"card-body\">\r\n                    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                        {/* Loan Summary */}\r\n                        <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                            <h3 className=\"font-semibold text-gray-900 mb-3\">Loan Summary</h3>\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\r\n                                <div>\r\n                                    <span className=\"text-gray-500\">Principal Amount:</span>\r\n                                    <div className=\"font-semibold\">‚Çπ{loan.loanAmount.toLocaleString()}</div>\r\n                                </div>\r\n                                <div>\r\n                                    <span className=\"text-gray-500\">Interest Collected:</span>\r\n                                    <div className=\"font-semibold text-green-600\">‚Çπ{loan.totalCollected.toLocaleString()}</div>\r\n                                </div>\r\n                                <div>\r\n                                    <span className=\"text-gray-500\">Remaining Principal:</span>\r\n                                    <div className=\"font-semibold\">‚Çπ{loan.remainingAmount.toLocaleString()}</div>\r\n                                </div>\r\n                                <div>\r\n                                    <span className=\"text-gray-500\">Monthly Interest:</span>\r\n                                    <div className=\"font-semibold\">‚Çπ{loan.monthlyInterest.toLocaleString()}</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Settlement Details */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                            <div>\r\n                                <label className=\"form-label\">Penalty Amount (‚Çπ)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    name=\"penaltyAmount\"\r\n                                    value={formData.penaltyAmount}\r\n                                    onChange={handleInputChange}\r\n                                    className=\"form-input\"\r\n                                    placeholder=\"0\"\r\n                                    min=\"0\"\r\n                                />\r\n                                <p className=\"text-xs text-gray-500 mt-1\">\r\n                                    Early closure penalty (if applicable)\r\n                                </p>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"form-label\">Discount Amount (‚Çπ)</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    name=\"discountAmount\"\r\n                                    value={formData.discountAmount}\r\n                                    onChange={handleInputChange}\r\n                                    className=\"form-input\"\r\n                                    placeholder=\"0\"\r\n                                    min=\"0\"\r\n                                />\r\n                                <p className=\"text-xs text-gray-500 mt-1\">\r\n                                    Discount for early payment\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Payment Method */}\r\n                        <div>\r\n                            <label className=\"form-label\">Payment Method</label>\r\n                            <select\r\n                                name=\"paymentMethod\"\r\n                                value={formData.paymentMethod}\r\n                                onChange={handleInputChange}\r\n                                className=\"form-select\"\r\n                            >\r\n                                <option value=\"cash\">üíµ Cash</option>\r\n                                <option value=\"bank_transfer\">üè¶ Bank Transfer</option>\r\n                                <option value=\"cheque\">üìÑ Cheque</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Notes */}\r\n                        <div>\r\n                            <label className=\"form-label\">Notes</label>\r\n                            <textarea\r\n                                name=\"notes\"\r\n                                value={formData.notes}\r\n                                onChange={handleInputChange}\r\n                                className=\"form-textarea\"\r\n                                rows=\"3\"\r\n                                placeholder=\"Additional notes about this pre-closure...\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Calculation Summary */}\r\n                        <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\r\n                            <h3 className=\"font-semibold text-blue-900 mb-3\">Settlement Calculation</h3>\r\n                            <div className=\"space-y-2 text-sm\">\r\n                                <div className=\"flex justify-between\">\r\n                                    <span>Remaining Principal:</span>\r\n                                    <span className=\"font-medium\">‚Çπ{loan.remainingAmount.toLocaleString()}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between\">\r\n                                    <span>Penalty Amount:</span>\r\n                                    <span className=\"font-medium text-red-600\">+‚Çπ{calculations.penaltyApplied.toLocaleString()}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between\">\r\n                                    <span>Discount Amount:</span>\r\n                                    <span className=\"font-medium text-green-600\">-‚Çπ{calculations.discountApplied.toLocaleString()}</span>\r\n                                </div>\r\n                                <hr className=\"border-blue-200\" />\r\n                                <div className=\"flex justify-between text-lg font-bold\">\r\n                                    <span>Final Settlement Amount:</span>\r\n                                    <span className=\"text-blue-900\">‚Çπ{calculations.finalSettlement.toLocaleString()}</span>\r\n                                </div>\r\n                                {calculations.discountApplied > 0 && (\r\n                                    <div className=\"flex justify-between text-sm text-green-600\">\r\n                                        <span>Client Savings:</span>\r\n                                        <span>‚Çπ{calculations.savings.toLocaleString()}</span>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Action Buttons */}\r\n                        <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200\">\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-outline\"\r\n                                onClick={onClose}\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                type=\"submit\"\r\n                                className=\"btn btn-danger\"\r\n                            >\r\n                                üîí Pre-Close Loan (‚Çπ{calculations.finalSettlement.toLocaleString()})\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PreCloseLoan;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}